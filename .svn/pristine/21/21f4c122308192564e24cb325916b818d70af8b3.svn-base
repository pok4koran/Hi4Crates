<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.IPatientBookMapper">
	
	<select id="doctor" resultType="MemberVO" parameterType="String">
		SELECT DISTINCT
		e.emp_no,
		m.mem_name
		FROM
		emp e
		JOIN
		member m ON e.mem_no = m.mem_no
		LEFT JOIN
		calendar c ON c.emp_no = e.emp_no
		AND c.calendar_title = '연가'
		AND #{date} BETWEEN c.CALENDAR_STARTDATE AND c.CALENDAR_ENDDATE
		WHERE
		c.emp_no IS NULL
		and e.emp_job='의사'
</select>                                                            
	
	<select id="time" resultType="clinicReservationVO" parameterType="clinicReservationVO">
		SELECT reserv_time, emp_no
		FROM clinic_reservation
		WHERE emp_no = #{empNo} AND reserv_date = #{reservDate}
	</select>
	
<!-- 	<insert id="insert" parameterType="clinicReservationVO"> -->
<!-- 		INSERT INTO clinic_reservation ( -->
<!-- 		    reserv_no, reserv_date, reserv_time, reserv_memo, emp_no, mem_no, calendar_key -->
<!-- 		) VALUES ( -->
<!-- 		    CLINIC_RESERVATION_SEQ.NEXTVAL, -->
<!-- 		    #{reservDate}, -->
<!-- 		    #{reservTime}, -->
<!-- 		    null, -->
<!-- 		    3, -->
<!-- 		    125, -->
<!-- 		    CALENDAR_SEQ.NEXTVAL -->
<!-- 		) -->
		
<!-- 	</insert> -->
	
</mapper>
