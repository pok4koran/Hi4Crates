<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.ISurgeryRecordMapper">

	<select id="getSurgeryList" resultType="surgeryReservVO">
		SELECT
		      SR.SURGERY_RESERVATION_NO
		    , SR.SURGERY_RESERVATION_DATE
		    , SR.SURGERY_RESERVATION_TIME
		    , SR.SURGERY_ROOM_NO
		    , SR.ORDER_NO
		    , SR.PATNT_NO
		    , SR.SURGERY_DOCTOR
		    , SR.SURGERY_KIND_CODE
		    , S.SURGERY_KIND_NAME
		    , SR.SURGERY_RESERVATION_STATUS
		    , PM.MEM_NAME AS patntName
		    , DM.MEM_NAME AS empName
		    , S.SURGERY_NO
		FROM
		    SURGERY_RESERVATION SR
		INNER JOIN
		    PATIENT P ON P.PATNT_NO = SR.PATNT_NO
		INNER JOIN
		    MEMBER PM ON PM.MEM_NO = P.MEM_NO
		INNER JOIN
		    EMP E ON E.EMP_NO = SR.SURGERY_DOCTOR
		INNER JOIN
		    MEMBER DM ON DM.MEM_NO = E.MEM_NO
		INNER JOIN
		    SURGERY_KIND S ON S.SURGERY_KIND_CODE = SR.SURGERY_KIND_CODE
		LEFT JOIN
		    SURGERY S ON S.ORDER_NO= SR.ORDER_NO
		WHERE 
		    SR.SURGERY_RESERVATION_STATUS ='Y'
		ORDER BY
		    SURGERY_RESERVATION_DATE DESC
	
	</select>

	
</mapper>