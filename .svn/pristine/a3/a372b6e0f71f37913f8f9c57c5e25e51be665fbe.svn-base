package kr.or.ddit.service.impl;

import java.util.List;

import javax.inject.Inject;

import org.springframework.stereotype.Service;

import kr.or.ddit.ServiceResult;
import kr.or.ddit.mapper.IVacationMapper;
import kr.or.ddit.service.IVacationService;
import kr.or.ddit.vo.VacationRequestVO;

@Service
public class VacationServiceImpl implements IVacationService {
	
	@Inject
	private IVacationMapper vacationMapper;
	
	@Override
	public List<VacationRequestVO> getVacationRequestMine(int memNo) {
		List<VacationRequestVO> vrv = vacationMapper.getVacationRequestMine(memNo);
		for (VacationRequestVO v : vrv) {
			String[] target = v.getVacationStartDate().substring(0,v.getVacationStartDate().indexOf(" ")).split("-");
			v.setVacationStartDate(String.format("%s년 %s월 %s일", target[0], target[1], target[2]));
			target = v.getVacationEndDate().substring(0,v.getVacationEndDate().indexOf(" ")).split("-");
			v.setVacationEndDate(String.format("%s년 %s월 %s일", target[0], target[1], target[2]));
			target = v.getVacationRequestDate().substring(0,v.getVacationRequestDate().indexOf(" ")).split("-");
			v.setVacationRequestDate(String.format("%s년 %s월 %s일", target[0], target[1], target[2]));
		}
		return vrv;
		
	}

	@Override
	public ServiceResult vacationRequest(VacationRequestVO vacationVO) {
		int res = vacationMapper.vacationRequest(vacationVO);
		if(res > 0) return ServiceResult.OK;
		if(res == 0) return ServiceResult.FAILED;
		return null;
	}

}
