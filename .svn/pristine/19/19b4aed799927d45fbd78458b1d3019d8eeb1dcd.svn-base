<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>


<meta id="_csrf" name="_csrf" content="${_csrf.token }">
<meta id="_csrf_header" name="_csrf_header" content="${_csrf.headerName }">

<!-- 헤더 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.css">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales-all.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<!-- Sweetalerts JS -->
<script src="${pageContext.request.contextPath}/resources/assets/libs/sweetalert2/sweetalert2.min.js"></script>
<script src="${pageContext.request.contextPath}/resources/assets/js/sweet-alerts.js"></script>
    
<!-- Sweetalerts CSS -->
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/assets/libs/sweetalert2/sweetalert2.min.css">

<script
	src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- 사이드바 -->


<style>
input[type=text]:focus {
    border-color: lightblue;
}
.custom-select option {
 	font-size: 16px; /* 원하는 글꼴 크기로 조정 */
    margin-bottom: 5px; /* 원하는 간격으로 조정 */
}

</style>


        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Start::app-content -->
        <div class="main-content app-content">
            <div class="container-fluid">

                <!-- Start::page-header -->
                
                <!-- <div class="d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb">
                    <div>
                        <p class="fw-semibold fs-18 mb-0">원무과-접수를 진행하세요</p>
                        <span class="fs-semibold text-muted">ㅇㅇ</span>
                    </div>
                    <div class="btn-list mt-md-0 mt-2">
                        
                        <button type="button" class="btn btn-secondary-light btn-wave" data-bs-toggle="modal"
                              data-bs-target="#create-task">
                              회원등록(모달버튼)하기
                        </button>


                        
                    </div>
                </div> -->

                 <!-- End::page-header -->

                <!-- Start::row-1 -->
                <div class="row">
                    <div class="col-xxl-7 col-xl-12">
                        <div class="row">
                            <div class="col-xl-4" >
                                <!-- 커스텀카드 시작 -->
                                <div class="card custom-card" style="height: 830px;  margin-bottom: 12px; ">
                                  <!-- 제목 시작 -->
                                    <div class="card-header justify-content-between" >
                                        <div class="card-title">
                                          	  수납 대기 목록
                                        </div>
                                        <%-- <div>
                                            <button type="button" class="btn btn-secondary-light btn-wave" data-bs-toggle="modal"
                                            data-bs-target="#create-task">
                                            <img src="${pageContext.request.contextPath}/resources/assets/images/icon/free-icon-account-14502797.png" width="20px" alt="">
                                            <span>&nbsp</span>
                                           	  회원등록하기</button>
                                        </div> --%>
                                    </div>
                                    <!-- 제목 끝 -->



                       			 
                       			 <!-- 대기환자 카드 시작 -->
						        <!-- Start::app-content -->
						        <div id="placeReserveList" style='overflow-y: auto;max-height: 800px;'>
						        
						        <!-- <div class="card custom-card" style="background-color:rgb(238, 243, 248);width: 280px;height: 140px;margin-left: 10px;">
								    <div class="card-body p-3" style="background-color:white;width: 260px;height: 110px;margin-left: 10px;margin-top: 10px;margin-bottom: 10px;">
								        
								        <div class="d-flex justify-content-between align-items-start mb-3 flex-wrap" style="">
								            <div class="d-inline-flex align-items-start position-relative">
								                <a href="profile.html" class="stretched-link"></a>
								                <div class="me-2">
								                    <span class="avatar avatar-rounded" >
								                        <img src="{pageContext.request.contextPath}/resources/assets/img/patient.png" alt="img">
								                    </span>
								                </div>
								                <div class="flex-grow-1">
								                    <span class="mb-0 d-block fs-14 fw-semibold"> 송현지</span>
								                    <span class="fs-13 ">여 25세<i class="bi bi-patch-check-fill text-success  fs-15"></i></span>
								                </div>
								            </div>
								            <span class="fs-10 badge rounded-pill bg-secondary">수납대기중</span>
								        </div>
								         <button type="button" class="btn btn-outline-info btn-wave" style="width: 220px;height: 35px;">선택</button>
								        <div class="d-flex align-items-end flex-wrap gap-2">
								            <div class="flex-fill">
								                <p class="fs-14 mb-1 text-muted">Highest Bid</p>
								                <div class="fs-16 mb-0 d-flex align-items-center fw-semibold">
								                  
								                </div>
								            </div>
								            <a href="javascript:void(0);" class="btn btn-primary-light btn-wave">Place Bid</a>
								        </div>
								    </div>
								</div> -->
								</div>
						        
						   
						        <!-- End::app-content -->
                       			 
                       			 <!-- 대기환자 카드 끝 -->
								
                            </div>
                                <!-- 커스텀카드 끝 -->
                            </div>

					            <!-- !!!!!!!!!!!!!!!!!!!!여기부터   -->
					            <div class="col-xl-8" style="height: 270px;" >
					                <div class="row">
					                    <!--******* 접수하기 카드박스 -->
					                        <div class="col-xl-12" style="height: 830px" >
					
					                            <!-- 여기 시작 -->
					                            <!-- 달력넣음 -->
					                            <div class="col-xl-12">
					                                <div class="card custom-card"  style=" height: 830px">
					                                    <div class="card-header">
					                                        <div class="card-title ">수납</div>
					                                    </div>
					                                    <div class="card-body">
					                                    
					                                    
					                                    <div class="card border custom-card" style="margin-top: 0px;">
					                                    	<div class="card custom-card ">
					                                    		<div class="card-header" style="padding-top: 0px;padding-bottom: 5px;" >
					                                    			<span class="fw-semibold"> <span id="receiveName" class="fw-semibold">***</span>환자 받을금액</span>
					                                    		</div>
					                                    		
					                                    	</div>
					                                    	<div class="card-body" style="padding-top: 0px;">
					                                    		<!-- div>
					                                    			<span>환자부담 총액   </span><span id="sumCost">350000원</span>
					                                    		</div> -->
					                                    		
					                                    		
					                                    		<!--  -->
					                                    		<div style="padding-bottom: 20px;">
							                                          <ul class="list-group" >
							                                              <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                      	<span>MRI비용 : </span> 
							                                                      </div>
							                                                      <div>
							                                                      	<span id="MRICost"></span><span class="me-2 fw-semibold">원</span>
							                                                  	  </div>
							                                                  </div>
							                                              </li>
							                                              
							                                              <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                        <span>XRAY비용 :</span> 
							                                                      </div>
							                                                      <div>
							                                                      	<span id="XRAYCost"></span><span class="me-2 fw-semibold">원</span>
							                                                 	  </div>
							                                                  </div>
							                                              </li>
							                                              <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	 <span>물리치료 :</span> 
							                                                      </div>
							                                                      <div>
							                                                     	 <span id="muliCost"></span><span class="me-2 fw-semibold">원</span>
							                                                      </div>
							                                                  </div>
							                                              </li>
							                                              <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	   <span>수술비용 :</span> 
							                                                      </div>
							                                                      <div>
							                                                      	<span id="surgeryCost"></span><span class="me-2 fw-semibold">원</span>
							                                                      </div>
							                                                  </div>
							                                              </li>
							                                              <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	   <span>입원비용 :</span> 
							                                                      </div>
							                                                      <div>
							                                                      	<span id="hpCost"></span><span class="me-2 fw-semibold">원</span>
							                                                      </div>
							                                                  </div>
							                                              </li>
							                                             <!-- <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	   <span>공단부담금 :</span> 
							                                                      </div>
							                                                      <div>
							                                                      	<span id="discount"></span><span class="me-2 fw-semibold">원</span>
							                                                      </div>
							                                                  </div>
							                                              </li> -->
							                                             <!--  <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	 <span>자료발급비용 :</span>
							                                                      </div>
							                                                      
							                                                       <div class="form-check">
																					    <label class="form-check-label" for="flexCheckDefault">
																					         처방전
																					    </label>
																					    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
																				  </div>
							                                                  </div>
							                                              </li> -->
							                                              
							                                          </ul>
							                                         </div>
					                                          
					                                          	
					                                          
					                                          
					                                          
					                                          
							                                          <div style="padding-bottom: 20px;">
							                                           <ul class="list-group">
							                                              
							                                              <li class="list-group-item">
							                                                  <div class="d-flex flex-column">
																			    <div class="form-check">
																			        <label class="form-check-label me-2 fw-semibold text-primary" for="diaCheck">
																			            	진단서(10000원)
																			        </label>
																			        <input class="form-check-input " type="checkbox" value="Y" id="diaPaper">
																			    </div>
																			    <div class="form-check">
																			        <label class="form-check-label me-2 fw-semibold text-primary" for="soCheck">
																			            	소견서(1000원)
																			        </label>
																			        <input class="form-check-input" type="checkbox" value="Y" id="soPaper">
																			    </div>
																			    <div class="form-check">
																			        <label class="form-check-label me-2 fw-semibold text-primary" for="priCheck">
																			           		처방전
																			        </label>
																			        <input class="form-check-input" type="checkbox" value="Y" id="priPaper">
																			    </div>
																			</div>
							                                              </li>
							                                             <li class="list-group-item">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	 <span>자료발급비용 :</span>
							                                                      </div>
							                                                      
							                                                       <div class="form-check">
																					    <span id="finalDataCost"></span><span class="me-2 fw-semibold">원</span>
																				  </div>
							                                                  </div>
							                                              </li> 
							                                              
							                                          </ul>
							                                         </div>
							                                         
							                                         <div>
							                                           <ul class="list-group">
							                                              
							                                             <li class="list-group-item" >
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	 <span>환자부담총액 :</span>
							                                                      </div>
							                                                      
							                                                       <div class="form-check">
																					    <span id="sumCost" class="me-2 fw-semibold text-info"></span><span class="me-2 fw-semibold text-info">원</span>
																				  </div>
							                                                  </div>
							                                              </li> 
							                                              
							                                              <li class="list-group-item" >
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	 <span>공단부담금:</span>
							                                                      </div>
							                                                      
							                                                       <div class="form-check">
																					    <span id="discount" class="me-2 fw-semibold text-danger"></span><span class="me-2 fw-semibold text-danger">원</span>
																				  </div>
							                                                  </div>
							                                              </li> 
							                                                
							                                             <li class="list-group-item" style="background-color: #effbff;">
							                                                  <div class="d-flex flex-wrap align-items-center  justify-content-between">
							                                                      <div class="me-2 fw-semibold">
							                                                       	 <span>받을 금액 :</span>
							                                                      </div>
							                                                      
							                                                       <div class="form-check">
																					    <span id="lastCost" class="me-2 fw-semibold text-info"></span><span class="me-2 fw-semibold text-info">원</span>
																				  </div>
							                                                  </div>
							                                              </li> 
							                                              
							                                          </ul>
							                                         </div>
					                                          
					                                          
					                                    		
					                                    		<!--  -->
					                                    		
					                                    	</div>
					                                    
					                                    </div>
					                                    
						                                        		 
						                               <!-- 테스트로 넣어봄 -->     
						    <div class="card custom-card">
                         
                
                            
                            
                            
                            
                        </div>
						                                   		 
						                               <!-- 테스트로 넣어봄 -->         		 
						                                        		 
						                                        		 
						                                        		 
						                                        		 
						                                        		 
						                                        		 
						                                        		 
						                                        		 
	                                        		
	                                        		
		
					                                    </div>
					                                </div>
					                            </div>
					                            <!-- 달력끝 -->
					                            
										</div>
					                    <!--******** 접수하기 박스 끝 -->
					                                                
					            <table style="width: 100px; height: 100px;">
					
					            </table>
					            <!-- <div class="card-body">
					                <div class="content-wrapper">
					                    <div id="crm-revenue-analytics">zzz</div>
					                </div>
					            </div> -->
					        </div>
					    </div>
					    <!-- !!!!!!!!!!!!!!!!!!!!여기까지   -->
                   <!-- Start::add task modal 모달시작 -->
				 
                 <!-- End::add task modal 모달끝 -->

                        <!-- 캘린더모달 -->
                        <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModal" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-body">
                                <div class="input-group">
                                    <a href="javascript:void(0);" class="input-group-text" id="Search-Grid"><i class="fe fe-search header-link-icon fs-18"></i></a>
                                    <input type="search" class="form-control border-0 px-2" placeholder="Search" aria-label="Username">
                                    <a href="javascript:void(0);" class="input-group-text" id="voice-search"><i class="fe fe-mic header-link-icon"></i></a>
                                    <a href="javascript:void(0);" class="btn btn-light btn-icon" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="javascript:void(0);">Action</a></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Another action</a></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Something else here</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Separated link</a></li>
                                    </ul>
                                </div>
                                <div class="mt-4">
                                    <p class="font-weight-semibold text-muted mb-2">Are You Looking For...</p>
                                    <span class="search-tags alert"><i class="fe fe-user me-2"></i>People<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                                    <span class="search-tags alert"><i class="fe fe-file-text me-2"></i>Pages<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                                    <span class="search-tags alert"><i class="fe fe-align-left me-2"></i>Articles<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                                    <span class="search-tags alert"><i class="fe fe-server me-2"></i>Tags<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                                </div>
                                <div class="my-4">
                                    <p class="font-weight-semibold text-muted mb-2">Recent Search :</p>
                                    <div class="p-2 border br-5 d-flex align-items-center text-muted mb-2 alert">
                                    <a href="notifications.html"><span>Notifications</span></a>
                                    <a class="ms-auto lh-1" href="javascript:void(0);" data-bs-dismiss="alert" aria-label="Close"><i class="fe fe-x text-muted"></i></a>
                                    </div>
                                    <div class="p-2 border br-5 d-flex align-items-center text-muted mb-2 alert">
                                    <a href="alerts.html"><span>Alerts</span></a>
                                    <a class="ms-auto lh-1" href="javascript:void(0);" data-bs-dismiss="alert" aria-label="Close"><i class="fe fe-x text-muted"></i></a>
                                    </div>
                                    <div class="p-2 border br-5 d-flex align-items-center text-muted mb-0 alert">
                                    <a href="mail.html"><span>Mail</span></a>
                                    <a class="ms-auto lh-1" href="javascript:void(0);" data-bs-dismiss="alert" aria-label="Close"><i class="fe fe-x text-muted"></i></a>
                                    </div>
                                </div>
                                </div>
                                <div class="modal-footer">
                                <div class="btn-group ms-auto">
                                    <button type="button" class="btn btn-sm btn-primary-light">Search</button>
                                    <button type="button" class="btn btn-sm btn-primary">Clear Recents</button>
                                </div>
                                </div>
                            </div>
                            </div>
                        </div>
                        
                        
                        <!--현흠모달  -->
                        
                         <div class="modal fade" id="payModal" tabindex="-1"
					            aria-labelledby="exampleModalLabel" aria-hidden="true">
					            <div class="modal-dialog">
					                <div class="modal-content">
					                    <div class="modal-header">
					                        <h6 class="modal-title" id="exampleModalLabel1">결제방식 추가(모달)</h6>
					                        <button type="button" class="btn-close" data-bs-dismiss="modal"
					                            aria-label="Close"></button>
					                    </div>
					                    <div class="modal-body" id="modalBody" style="padding-left: 25px;padding-right: 25px;">
					                       <!-- <form action="/radiation/updateEqInfo" method="post" id="updateForm"> -->
					                       		<input type="hidden" id="eqNo" name="eqNo" />
					                			<div class="mb-3">
					                				
									                <label for="recipient-name"
									                    class="col-form-label">남은금액(모달) : </label>
									                <input type="text" style="background-color:rgb(230 230 237);" class="form-control" value="" disabled id="leftCost" name="leftCost">
									            </div>
									             <div class="mb-3">
									                <label for="message-text"
									                    class="col-form-label">결제 방식(모달):</label>
									                    <select class="form-select" id="selectPay" name="selectPay">
									                		<option value="1">카드</option>
									                		<option value="2">현금</option>
									                	</select>
									            </div>
									            <div class="mb-3">
									                <label for="message-text"
									                    class="col-form-label">결제금액(모달) :   </label><button class="btn btn-outline-dark btn-sm btn-wave" id="allCost">전체금액</button>
									                    
									                    
									                <input type="text" class="form-control" id="payMoney" name="payMoney">
									            </div>
									            <div class="mb-3">
									                <label for="message-text"
									                    class="col-form-label">할부 선택(모달):</label>
									                    <select class="form-select" id="payMonth" name="payMonth">
									                		<option value="1">일시불</option>
									                		<option value="2">3개월</option>
									                	</select>
									            </div>
									           
									        <!-- </form>	 -->
					                    </div>
					                    <div class="modal-footer">
					                        <button type="button" class="btn btn-secondary" id="updateBtn">추가</button>
					                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">취소</button>
					                    </div>
					                </div>
					            </div>
					        </div>
                        <!--현흠모달  -->
 
                        </div>
                    </div>
                    <div class="col-xxl-5 col-xl-12">
                        <div class="row">
                            <div class="col-xxl-12 col-xl-12">
                                <div class="row">
                                    <div class="col-xl-12 col-xl-6">
                                       
                                       
                                        <!-- 문서카드내용 -->
					                            
										<div class="card custom-card" style="height: 450px">
					                            <div class="card-header justify-content-between">
					                                <div class="card-title">
					                                    	결제내역
					                                </div>
					                                
					                            </div>
					                            
					                            
					                            <!-- 결제방식  -->
                            
                            	<div class="card border custom-card" style="width:630px;margin-left: 20px;">
                                   	<div class="card custom-card">
                                   		<div class="card-header" style="padding-top: 0px;padding-bottom: 5px;">
                                   			<span class="fw-semibold"> 결제내역</span><button type="button" id="addPayBtn" class="btn btn-info-light btn-sm btn-wave"  data-bs-toggle="modal" data-bs-target="#payModal">+추가</button>
                                   			
                                   		</div>
                                   	</div>
                                   	<div class="card-body">
                                   	 		<table class="table text-nowrap table-bordered border-primary">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">날짜</th>
                                                                <th scope="col">수납금액</th>
                                                                <th scope="col">결제방식</th>
                                                                
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <th scope="row">
                                                                    2024-04-17
                                                                </th>
                                                                <td>
                                                                    10000원
                                                                </td>
                                                                <td>
                                                                    <span class="badge bg-info">카드</span>
                                                                </td>
                                                                
                                                            </tr>
                                                            <tr>
                                                                <th scope="row">
                                                                    2024-04-17
                                                                </th>
                                                                <td>
                                                                    15000원
                                                                </td>
                                                                <td>
                                                                    <span class="badge bg-success">현금</span>
                                                                </td>
                                                                
                                                            </tr>
                                                           
                                               </tbody>
                                           </table>
                                           <span>&nbsp</span>
                                           
                                           <table class="table text-nowrap table-bordered border-primary">
                                                       <!--  <thead>
                                                            <tr>
                                                                <th scope="col">날짜</th>
                                                                <th scope="col">수납금액</th>
                                                                <th scope="col">결제방식</th>
                                                                
                                                            </tr>
                                                        </thead> -->
                                                        <tbody>
                                                         	<tr>
                                                                <th scope="row" class="fw-semibold">
                                                                    	결제금액
                                                                </th>
                                                                <td id="payResPrice">
                                                                    10000원(결제방식 추가할때마다 동적으로 줄어들게)
                                                                </td>
                                                                
                                                            </tr>
                                                            <tr>
                                                                <th scope="row" class="fw-semibold">
                                                                    	남은금액
                                                                </th>
                                                                <td id="payLeftPrice">
                                                                    
                                                                </td>
                                                                
                                                            </tr>
                                                            
                                               </tbody>
                                           </table>
                                   	</div>
					            </div>
					            
                            <!-- 결제방식  -->
                            
					                            
					                             
					                        </div>
										                            
					              <!-- 문서카드내용 -->
                                       
                                       
                                       
                                       
                                        
                                    <div class="col-xxl-12 col-xl-6" style="height:550px;">
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    <!--  -->
                                <div class="card custom-card" style="height:350px;">
                                            <div class="card-header justify-content-between">
                                                <div class="card-title">
                                                    <i class="bx bx-receipt">&nbsp;</i>
                                                    	문서발급
                                                </div>
                                            </div>
                                            
                                            	<div class="card-body p-0">
					                               <i class="ti ti-file-text"></i> <span class="fw-semibold">진단서 </span><span id="diagStatus" class="text-danger">[출력불가]</span>
					                            </div>
					                             <div class="card-body p-0">
					                               <i class="ti ti-file-text"></i><span class="fw-semibold">소견서 </span><span id="soStatus" class="text-success">[출력가능]</span>
					                            </div>
					                             <div class="card-body p-0">
					                               <i class="ti ti-file-text"></i><span class="fw-semibold">처방전 </span><span id="priStatus" class="text-success">[출력가능]</span>
					                            </div>
                               <!--              <div class="card-body">
                                                <div>
                                				예약하기 표 넣기
                                				
												변경테이블 
												<div class="table-responsive">
                                                    <table class="table text-nowrap table-bordered border-primary">
                                                         
                                                        <tbody id="table">
                                                            <tr>
                                                                <th scope="row" class="me-2 fw-semibold" >
                                                                    	담당의
                                                                </th>
                                                                <td >
                                                                	<input type="hidden" id="ID" disabled="disabled" />
                                                                	<input type="text" class="form-control" id="reserveDoctorName"  style="width: 250px;float: left;padding-top: 4px;padding-bottom: 3px;" value="김의사" >
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <th scope="row" class="me-2 fw-semibold">
                                                               	     환자명
                                                                </th>
                                                                 <td >
                                                                	<input type="text" class="form-control" id="reservePatientName"  style="width: 250px;float: left;padding-top: 4px;padding-bottom: 3px;">
                                                                    	
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div style="margin-top: 10px" >
	                                                   	<button type="button" id="insertBtn" class="btn btn-secondary btn-wave" style="float:right;">저장</button>
	                                                    <span style="margin:4px; float: right;"></span>
	                                                    <button type="button" id="updateBtn" class="btn btn-secondary btn-wave" style="float:right;">수정</button>
	                                                    <span style="margin:4px; float: right;"></span>
	                                                    <button type="button" id="deleteBtn" class="btn btn-secondary btn-wave" style="float:right;">삭제</button>
	                                                	</div>
	                                                </div>
												
												변경테이블 
												
												
												
                                				
                                				예약하기 표 넣기
                                            </div>
                                        </div> -->
                                    </div> 
                                        <!--  -->
                                    </div>
                                    <div class="col-xxl-12 col-xl-6">
                   
                                    </div>
                                    <!--  -->

                                    <!--  -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End::row-1 -->

            </div>
        </div>
        <!-- End::app-content -->
        
        <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModal" aria-hidden="true" >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-body">
                  <div class="input-group">
                    <a href="javascript:void(0);" class="input-group-text" id="Search-Grid"><i class="fe fe-search header-link-icon fs-18"></i></a>
                    <input type="search" class="form-control border-0 px-2" placeholder="Search" aria-label="Username">
                    <a href="javascript:void(0);" class="input-group-text" id="voice-search"><i class="fe fe-mic header-link-icon"></i></a>
                    <a href="javascript:void(0);" class="btn btn-light btn-icon" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="fe fe-more-vertical"></i>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:void(0);">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:void(0);">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:void(0);">Something else here</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="javascript:void(0);">Separated link</a></li>
                    </ul>
                  </div>
                  <div class="mt-4">
                    <p class="font-weight-semibold text-muted mb-2">Are You Looking For...</p>
                    <span class="search-tags alert"><i class="fe fe-user me-2"></i>People<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                    <span class="search-tags alert"><i class="fe fe-file-text me-2"></i>Pages<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                    <span class="search-tags alert"><i class="fe fe-align-left me-2"></i>Articles<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                    <span class="search-tags alert"><i class="fe fe-server me-2"></i>Tags<a href="javascript:void(0)" class="tag-addon" data-bs-dismiss="alert"><i class="fe fe-x"></i></a></span>
                  </div>
                  <div class="my-4">
                    <p class="font-weight-semibold text-muted mb-2">Recent Search :</p>
                    <div class="p-2 border br-5 d-flex align-items-center text-muted mb-2 alert">
                      <a href="notifications.html"><span>Notifications</span></a>
                      <a class="ms-auto lh-1" href="javascript:void(0);" data-bs-dismiss="alert" aria-label="Close"><i class="fe fe-x text-muted"></i></a>
                    </div>
                    <div class="p-2 border br-5 d-flex align-items-center text-muted mb-2 alert">
                      <a href="alerts.html"><span>Alerts</span></a>
                      <a class="ms-auto lh-1" href="javascript:void(0);" data-bs-dismiss="alert" aria-label="Close"><i class="fe fe-x text-muted"></i></a>
                    </div>
                    <div class="p-2 border br-5 d-flex align-items-center text-muted mb-0 alert">
                      <a href="mail.html"><span>Mail</span></a>
                      <a class="ms-auto lh-1" href="javascript:void(0);" data-bs-dismiss="alert" aria-label="Close"><i class="fe fe-x text-muted"></i></a>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <div class="btn-group ms-auto">
                    <button type="button" class="btn btn-sm btn-primary-light">Search</button>
                    <button type="button" class="btn btn-sm btn-primary">Clear Recents</button>
                  </div>
                </div>
              </div>
            </div>
        </div>
        

    </div>

    
    <!-- Scroll To Top -->
    <div class="scrollToTop">
        <span class="arrow"><i class="ri-arrow-up-s-fill fs-20"></i></span>
    </div>
    <div id="responsive-overlay"></div>
    <!-- Scroll To Top -->

    <!-- Popper JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/@popperjs/core/umd/popper.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Defaultmenu JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/defaultmenu.min.js"></script>

    <!-- Node Waves JS-->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/node-waves/waves.min.js"></script>

    <!-- Sticky JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/sticky.js"></script>

    <!-- Simplebar JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/simplebar/simplebar.min.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/js/simplebar.js"></script>

    <!-- Color Picker JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/@simonwep/pickr/pickr.es5.min.js"></script>

  

    <!-- JSVector Maps JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/jsvectormap/js/jsvectormap.min.js"></script>

    <!-- JSVector Maps MapsJS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/jsvectormap/maps/world-merc.js"></script>

    <!-- Apex Charts JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/apexcharts/apexcharts.min.js"></script>

    <!-- Chartjs Chart JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/chart.js/chart.min.js"></script>

    <!-- CRM-Dashboard -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/crm-dashboard.js"></script>

    <!-- Custom JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/custom.js"></script>

    
    <!-- Custom-Switcher JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/custom-switcher.min.js"></script>
    
    <!-- Dragula JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/dragula/dragula.min.js"></script>

    <!-- Flat Picker JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/libs/flatpickr/flatpickr.min.js"></script>
    
    <!-- CRM Deals JS -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/crm-deals.js"></script>
    
</body>
<script>
$(document).ready(function(){
	let priceSum = 0;  // 환자부담총액
	let discount = 0;  // 공단부담금
	let lastPrice = 0; // 받을 금액
	
	let pickReceiptNo =0;// 접수번호 (선택한)
	
    $.ajax({
    	method: 'POST',
    	url : '/admin/getReserveList',
    	contentType:'application/json; charset=utf-8',
    	beforeSend : function(xhr){
    		 // CSRF 토큰 헤더에 추가
            xhr.setRequestHeader($("meta[name='_csrf_header']").attr("content"), $("meta[name='_csrf']").attr("content"));
    	},
    	success : function(res){
    		console.log("수납대기목록결과",res);
    		
    		 // 받아온 데이터에 대해 반복문을 돌며 HTML을 생성하고 추가합니다.
    	    res.forEach(function(item) {
    	    	
    	    
    		console.log("체킹킹");
    		console.log(item.receiptNo);
    		var newResultHtml =/*  '<div class="card border custom-card" style="background-color:white;width: 280px;height: 140px;margin-left: 10px;margin-bottom: 5px;margin-top: 10px;">' +
    	    '<div class="card-body p-3" style="width: 260px;height: 110px;margin-left: 10px;margin-top: 10px;margin-bottom: 10px;">' +
    	    '<div class="d-flex justify-content-between align-items-start mb-3 flex-wrap" style="">' +
    	    '<div class="d-inline-flex align-items-start position-relative">' +
    	    '<a href="profile.html" class="stretched-link"></a>' +
    	    '<div class="me-2">' +
    	    '<span class="avatar avatar-rounded">' +
    	    '<img src="${pageContext.request.contextPath}/resources/assets/img/patient.png" alt="img">' +
    	    '</span>' +
    	    '</div>' +
    	    '<div class="flex-grow-1">' +
    	    '<span class="mb-0 d-block fs-14 fw-semibold">' + item.memName + '</span>' +
    	    '<span class="fs-13 ">' + item.memGender + ' ' + item.memAge + '세<i class="bi bi-patch-check-fill text-success  fs-15"></i></span>' +
    	    '</div>' +
    	    '</div>' +
    	    '<span class="fs-10 badge rounded-pill bg-secondary">수납대기중</span>' +
    	    '</div>' +
    	    '<input type="hidden" value="'+item.receiptNo+'" />'+
    	    '<button type="button" class="btn btn-outline-info btn-wave pickPt" style="width: 220px;height: 35px;">선택</button>' +
    	    '</div>' +
    	    '</div>'; */
    	    
    	    
    	    '<div class="card border custom-card" style="background-color:white;width: 280px;height: 110px;margin-left: 10px;margin-bottom: 10px; margin-top: 5px;">'+
            '<div class="card-header" style="height: 30px; background-color: #f6feff !important">'+
            '<span class="fw-semibold fs-13" style="position: absolute; left: 12px; ">수납대기실</span>'+
            '</div>'+
            '<div class="card-body p-3" style="width: 240px;height: 110px;margin-left: 10px;margin-bottom: 10px;">'+
            '<div class="d-flex justify-content-between align-items-start mb-3 flex-wrap" style="">'+
            '<div class="d-inline-flex align-items-start position-relative pickPt">'+
            /* '<a href="profile.html" class="stretched-link"></a>'+ */
            '<div class="flex-grow-1">'+
            '<span class="mb-0 d-block fs-15 fw-semibold patntName ">' + item.memName + '</span>'+
            '<span class="fs-13 text-muted">' + item.memGender + ' ' + item.memAge + '세</span>'+
            '</div>' +
            '</div>' +
            '<span class="fs-10 badge rounded-pill bg-secondary">수납대기중</span>'+
            
            '</div>' +
            '<input type="hidden" value="'+item.receiptNo+'" />'+
            '</div>' +
            '</div>';
    	    
    	    
    		
    		        $("#placeReserveList").append(newResultHtml); // 결과를 추가할 부모 요소에 새로운 결과를 추가합니다.
    		
    		
    		
    	    })
    		
    		
    	}
    })    
    
    //수납대기환자 클릭 이벤트
    //접수번호를 가져와서 수납하기
    $(document).on("click",".pickPt",function(){
    	alert("dd");
    	//console.log($(this).closest('.card-body').find('input[type="hidden"]').val());
    	pickReceiptNo = $(this).closest('.card-body').find('input[type="hidden"]').val(); // 접수번호
    	
    	//환자이름 가져와서 수납내역에 띄우려고
    	let patntName = $(this).closest('.card-body').find('.patntName').text();
    	$("#receiveName").html(patntName);
    	
    	
    	console.log("접수번호체킁>>",pickReceiptNo);
//     	pickReceiptNo = 6;
    	
    	let data ={
    			"receiptNo": pickReceiptNo
    	}
    	
    	//접수번호로 물리치료 가져오기 (갯수 가져오기) - rNo 6으로 테스트
    	$.ajax({
    		url : "/admin/getPrice",
    		method : "post",
    		data : JSON.stringify(data),
    		contentType : "application/json; charset=utf-8",
    		beforeSend: function(xhr) {
    	     	   // CSRF 토큰 헤더에 추가
                 xhr.setRequestHeader($("meta[name='_csrf_header']").attr("content"), $("meta[name='_csrf']").attr("content"));
      		},
    		success: function(res){
    			console.log("가격데이터들 : ",res); 
    			let MRICnt = res.MRICnt;//MRI 횟수_
    			let XRAYCnt = res.XRAYCnt;//XRAY 횟수_
    			let mulliCnt = res.mulliCnt;//물리 횟수_
    			let wardPrice = res.wardPrice;//병실하루당가격
    			let hpday = res.hpday; // 총 입원일수_
    			let surgeryPrice = res.surgeryPrice;//수술가격_
    			
    			
    			
    			
    			console.log(MRICnt);
    			console.log(XRAYCnt);
    			console.log(mulliCnt);
    			console.log(wardPrice);
    			console.log(hpday);
    			console.log(surgeryPrice);
    			let MRIPrice = 0;
    			let XRAYPrice = 0;
    			let mulliPrice = 0;
    			let hpPrice = 0;
    			
    			//let priceSum = 0;  //전역으로뺌
    			
    			if(MRICnt!=0){
    				MRIPrice = MRICnt*400000;
    				priceSum += MRIPrice;
    			}
    			console.log("MRIPrice:",MRIPrice);
    			if(XRAYCnt!=0){
    				XRAYPrice = XRAYCnt*10000;
    				priceSum += XRAYPrice;
    			}
    			console.log("XRAYPrice:",XRAYPrice)
    			if(mulliCnt!=0){
    				mulliPrice = mulliCnt*20000;
    				priceSum += mulliPrice;
    			}
    			console.log("mulliPrice:",mulliPrice)
    			if(hpday!=0){
    				hpPrice = hpday*wardPrice;
    				priceSum += hpPrice;
    			}
    			console.log("hpPrice:",hpPrice)
    			
    			console.log("priceSum:",priceSum)
    			
    			discount = priceSum * 0.6;
    			console.log("discount",discount);
    			
    			
    			lastPrice = priceSum-discount;
    			
    			$("#sumCost").html(priceSum);
    			$("#MRICost").html(MRIPrice);
    			$("#XRAYCost").html(XRAYPrice);
    			$("#muliCost").html(mulliPrice);
    			$("#surgeryCost").html(surgeryPrice);
    			$("#hpCost").html(hpPrice);
    			$("#discount").html(discount);
    			$("#lastCost").html(lastPrice);
    			
    			
    			
    		}
    	})
    	
    });
    
    
    //진단서 체크여부 값 가져오기
    let diaPaperValue='';
    let diaPrice = 10000;
    let soPrice = 1000;
    
    let dataPriceSum = 0;
    let dataPriceSum2 = 0;
    let finalDataPrice =0;
    
    
    //let dataPriceSum = 0;//
    
 	// 진단서 체크박스가 클릭되었을 때 실행될 함수
    $('#diaPaper').change(function(){
    	
    	dataPriceSum = 0;
    	
        var isChecked = $(this).prop('checked');
        diaPaperValue = isChecked ? 'Y' : 'N'; // 체크됐으면 'Y', 아니면 'N'
        console.log("진단서 값: " + diaPaperValue);
        if(diaPaperValue=='Y'){
        	dataPriceSum += diaPrice;// +10000
			
        }else{
        	dataPriceSum -= diaPrice;// -10000
        }
        console.log("dataPriceSum:",dataPriceSum);
        priceSum+=dataPriceSum;
        finalDataPrice+=dataPriceSum
        lastPrice = priceSum-discount;
        $("#sumCost").html(priceSum);
        $("#finalDataCost").html(finalDataPrice);
        $("#lastCost").html(lastPrice);
        
        
        
        // 이어서 필요한 작업을 수행할 수 있음
    });
 	
 	$('#soPaper').change(function(){
 		dataPriceSum2 = 0;
 		
 		  var isChecked = $(this).prop('checked');
 	        diaPaperValue = isChecked ? 'Y' : 'N'; // 체크됐으면 'Y', 아니면 'N'
 	        console.log("소견서 값: " + diaPaperValue);
 	        if(diaPaperValue=='Y'){
 	        	dataPriceSum2 += soPrice;// +1000
 				
 	        }else{
 	        	dataPriceSum2 -= soPrice;// -1000
 	        }
 	        console.log("dataPriceSum:",dataPriceSum2);
 	        priceSum+=dataPriceSum2;
 	        finalDataPrice+=dataPriceSum2;
 	        lastPrice = priceSum-discount;
 	        $("#sumCost").html(priceSum);
 	        $("#finalDataCost").html(finalDataPrice);
 	        $("#lastCost").html(lastPrice);
 	        
 		
 		
 	})
 	
 	/* 결제방식추가 모달 */
 	
 	$("#addPayBtn").on("click",function(){
 		
 		
 		
 		// 식 추가하기!!
	 	//let leftCostVal = lastPrice; // 남은금액 : 받을금액 - 결제한금액    
	 	//let leftCostHtml = leftCostVal +"원";
	 	//console.log("leftCostVal:",leftCostVal);
	 	//남은금액 보여주기
	 	//$("#leftCost").val(leftCostHtml);
	 	
	 	
	 	//확인버튼 이벤트
	 	$("#updateBtn").on("click",function(){
	 		console.log("확인버튼");
		 	var selectedPay = $("#selectPay option:selected").val(); // 카드:1, 현금:2
		 	console.log("selectedPay:",selectedPay);
	 		
		 	var payMoney = $("#payMoney").val(); // 입력한 금액
		 	console.log("payMoney:",payMoney);
		 	
		 	//남은금액
	 		let leftCostVal = lastPrice-payMoney; // 남은금액 : 받을금액 - 결제한금액    
	 		let leftCostHtml = leftCostVal +"원";
	 		console.log("leftCostVal:",leftCostVal);
	 		console.log("leftCostHtml:",leftCostHtml);
	 		
		 	//전체금액 클릭 이벤트
		 	$("#allCost").on("click",function(){
		 		$("#payMoney").val(leftCostHtml);
		 	})
		 	
		 	console.log("pickReceiptNo",pickReceiptNo);
		 	
	 		
	 		$("#payResPrice").html(" 채우기"); //  결제한 금액
	 		$("#payLeftPrice").html("  채우기");//남은 금액
	 		
		 	
		 	
		 	if(selectedPay==1){ // 카드
		 		var data ={
		 				"receiveCard":payMoney,
		 				"receiveCost":payMoney,
		 				"leftCost":leftCostVal,
		 				"empNo":10000,
		 				"receiptNo":pickReceiptNo
		 		}
		 	}else if(selectedPay==2){ //현금
		 		var data ={
		 				"receiveCash":payMoney,
		 				"receiveCost":payMoney,
		 				"leftCost":leftCostVal,
		 				"empNo":10000,
		 				"receiptNo":pickReceiptNo
		 		}
		 	}
		 	
	 		
	 		$.ajax({
	 			method:'post', 
	 			url:'/admin/doPay',
	 			data:JSON.stringify(data),
	 			contentType:'application/json; charset=utf-8',
	 			beforeSend: function(xhr) {
	    	     	   // CSRF 토큰 헤더에 추가
	                 xhr.setRequestHeader($("meta[name='_csrf_header']").attr("content"), $("meta[name='_csrf']").attr("content"));
	      		},
	 			success:function(res){
	 				
	 			}
	 		})
	 	})
 	
 	
 	
 	})
 	
 	
 	
 	
 	
 	
 	
 	
 	
 	
 	
	
    
    
    
    	
    });
    
    
    
   
    
    
    
    
    
        
</script>

</html>